# PriceTracker

- Running XCode 26.1.1 , iOS 17.6+

- Architecure used - MVVM

App/PriceTrackerApp.swift
    - entry point of the app

App/AppContainer
    - dependencies conatainer
    
Features/SymbolsFeed and Features/SymbolDetails
    - the screens of the app
    - SymbolsFeedFeature and SymbolDetailsFeature play the role of assemblies for the screens
    
Models and Models/ProtoGenerated 
    - contain the model objects
    - Models/ProtoGenerated specifically contains the models generated by the Swift protobuffer
    
Network/Feed/WebSocketClient.swift
    - Manages the websocket connection, e.g. connecting/disconnecting, sending and receiving messages.
    - For sending it accepts URLSessionWebSocketTask.Message which allows for sending both strings and data. It also keeps the WebSocketClient independent of business logic.
    - The received messages are propagated to '@Published var response: Response?' which again allows for both strins and data responses 
    - The connection state is propagated to '@Published var isConnected'
    - Implemented retrying sending failed messages in the cases of network error.
    
    I shoud say that exprimenting with the 'wss://ws.postman-echo.com/raw' i have met limitations sending data so i had to backoff to base64 encoding the objects. This certainly is not optimal because of the bloated size of the strings. In real production app it is expected that the web socket would fully support data.
    Testing with 'wss://echo.websocket.org' - data was supported.

Network/Feed/SymbolsMessagesInterpreter
    - Receives business model objects, translates them to the WebSocketClient generic messages and vice versa. It is used by the upper layers for the communication. Abstraction between SymbolsMessagesInterpreter and WebSocketClient is maintained by the MessageHandler protocol.
    
FeedsSimulator
    - Simulates symbols feed pushes. As part of it i have implemented DetachedTimer which runs in a detached task allowing for little interference of the UI experience.

Utils/StocksProvider
    Loads seed data of stocks which are used for simulating the feed and the symbol details fetches. Loads the data from SymbolsFeedSeed.json
